'use strict';

angular.module('angularMovie').directive('navSearch', navSearch);

function navSearch($http, API_URL, KEY, Movie, $location) {
  return {
    restrict: 'E',
    templateUrl: 'views/navsearch.html',
    link: function link(scope, elem, attrs) {
      scope.searchresults;
      scope.opened = false;

      scope.search = function () {
        if (scope.searchText) {
          scope.opened = true;
          Movie.performSearch(scope.searchText).then(function (res) {
            scope.searchresults = res.data.results;
          });
        }
      };

      window.onclick = function () {
        scope.$apply();
        scope.opened = false;
      };
    }
  };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kaXJlY3RpdmVzL3NlYXJjaC5kaXJlY3RpdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQUViLE9BQU8sQ0FDSixNQUFNLENBQUMsY0FBYyxDQUFDLENBQ3RCLFNBQVMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUM7O0FBRW5DLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7QUFDeEQsU0FBTztBQUNMLFlBQVEsRUFBRSxHQUFHO0FBQ2IsZUFBVyxFQUFFLHNCQUFzQjtBQUNuQyxRQUFJLEVBQUUsY0FBUyxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUNqQyxXQUFLLENBQUMsYUFBYSxDQUFDO0FBQ3BCLFdBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDOztBQUVyQixXQUFLLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDeEIsWUFBRyxLQUFLLENBQUMsVUFBVSxFQUFFO0FBQ25CLGVBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQ3BCLGVBQUssQ0FDRixhQUFhLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUMvQixJQUFJLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDYixpQkFBSyxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztXQUN4QyxDQUFDLENBQUE7U0FDTDtPQUNGLENBQUE7O0FBRUQsWUFBTSxDQUFDLE9BQU8sR0FBRyxZQUFXO0FBQzFCLGFBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNmLGFBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO09BQ3RCLENBQUM7S0FDSDtHQUNGLENBQUE7Q0FDRiIsImZpbGUiOiJzcmMvanMvZGlyZWN0aXZlcy9zZWFyY2guZGlyZWN0aXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2FuZ3VsYXJNb3ZpZScpXG4gIC5kaXJlY3RpdmUoJ25hdlNlYXJjaCcsIG5hdlNlYXJjaCk7XG5cbiAgZnVuY3Rpb24gbmF2U2VhcmNoKCRodHRwLCBBUElfVVJMLCBLRVksIE1vdmllLCAkbG9jYXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbmF2c2VhcmNoLmh0bWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLnNlYXJjaHJlc3VsdHM7XG4gICAgICAgIHNjb3BlLm9wZW5lZCA9IGZhbHNlO1xuXG4gICAgICAgIHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKHNjb3BlLnNlYXJjaFRleHQpIHtcbiAgICAgICAgICAgIHNjb3BlLm9wZW5lZCA9IHRydWU7XG4gICAgICAgICAgICBNb3ZpZVxuICAgICAgICAgICAgICAucGVyZm9ybVNlYXJjaChzY29wZS5zZWFyY2hUZXh0KVxuICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgc2NvcGUuc2VhcmNocmVzdWx0cyA9IHJlcy5kYXRhLnJlc3VsdHM7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICBzY29wZS5vcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiJdfQ==
