'use strict';

angular.module('angularMovie').directive('navSearch', navSearch);

function navSearch($http, API_URL, KEY, Movie, $location) {
  return {
    restrict: 'E',
    templateUrl: 'views/navsearch.html',
    link: function link(scope, elem, attrs) {
      scope.searchresults;
      scope.opened = false;
      scope.search = function () {
        scope.opened = true;
        Movie.performSearch(scope.searchText).then(function (res) {
          scope.searchresults = res.data.results;
        });
      };
      // toggles opening and closing of search dropdown
      scope.toggleItems = function () {
        scope.opened = !scope.opened;
      };
      window.onclick = function () {
        scope.$apply();
        if (scope.opened) {
          scope.opened = !scope.opened;
        }
      };
    }
  };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9kaXJlY3RpdmVzL3NlYXJjaC5kaXJlY3RpdmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQUViLE9BQU8sQ0FDSixNQUFNLENBQUMsY0FBYyxDQUFDLENBQ3RCLFNBQVMsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUM7O0FBRW5DLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUU7QUFDeEQsU0FBTztBQUNMLFlBQVEsRUFBRSxHQUFHO0FBQ2IsZUFBVyxFQUFFLHNCQUFzQjtBQUNuQyxRQUFJLEVBQUUsY0FBUyxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRTtBQUNqQyxXQUFLLENBQUMsYUFBYSxDQUFDO0FBQ3BCLFdBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQ3JCLFdBQUssQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUN4QixhQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUNwQixhQUFLLENBQ0YsYUFBYSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FDL0IsSUFBSSxDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ2IsZUFBSyxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztTQUN4QyxDQUFDLENBQUE7T0FDTCxDQUFBOztBQUVELFdBQUssQ0FBQyxXQUFXLEdBQUcsWUFBVztBQUM3QixhQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztPQUM5QixDQUFBO0FBQ0QsWUFBTSxDQUFDLE9BQU8sR0FBRyxZQUFXO0FBQzFCLGFBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNmLFlBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTtBQUNoQixlQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztTQUM5QjtPQUNGLENBQUM7S0FDSDtHQUNGLENBQUE7Q0FDRiIsImZpbGUiOiJzcmMvanMvZGlyZWN0aXZlcy9zZWFyY2guZGlyZWN0aXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2FuZ3VsYXJNb3ZpZScpXG4gIC5kaXJlY3RpdmUoJ25hdlNlYXJjaCcsIG5hdlNlYXJjaCk7XG5cbiAgZnVuY3Rpb24gbmF2U2VhcmNoKCRodHRwLCBBUElfVVJMLCBLRVksIE1vdmllLCAkbG9jYXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbmF2c2VhcmNoLmh0bWwnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLnNlYXJjaHJlc3VsdHM7XG4gICAgICAgIHNjb3BlLm9wZW5lZCA9IGZhbHNlO1xuICAgICAgICBzY29wZS5zZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS5vcGVuZWQgPSB0cnVlO1xuICAgICAgICAgIE1vdmllXG4gICAgICAgICAgICAucGVyZm9ybVNlYXJjaChzY29wZS5zZWFyY2hUZXh0KVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICBzY29wZS5zZWFyY2hyZXN1bHRzID0gcmVzLmRhdGEucmVzdWx0cztcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgLy8gdG9nZ2xlcyBvcGVuaW5nIGFuZCBjbG9zaW5nIG9mIHNlYXJjaCBkcm9wZG93blxuICAgICAgICBzY29wZS50b2dnbGVJdGVtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjb3BlLm9wZW5lZCA9ICFzY29wZS5vcGVuZWQ7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICBpZiAoc2NvcGUub3BlbmVkKSB7XG4gICAgICAgICAgICBzY29wZS5vcGVuZWQgPSAhc2NvcGUub3BlbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiJdfQ==
