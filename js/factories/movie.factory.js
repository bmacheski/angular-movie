'use strict';

angular.module('angularMovie').factory('Movie', Movie);

function Movie($http, $q, API_URL, KEY) {
  var obj = {};
  var data;

  // gets trending movies whether or not API call has been performed
  obj.getPopular = function () {
    return data ? $q.when(data) : $http.get(API_URL + ('/movie/popular?api_key=' + KEY)).then(function (res) {
      data = res.data;
      return data;
    });
  };

  obj.performSearch = function (text) {
    var search;
    var url = API_URL + ('/search/movie?api_key=' + KEY + '&query=');
    return search ? $q.when(search) : $http.get(url + text).success(function (res) {
      search = res.results;
      return search;
    });
  };
  return obj;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9mYWN0b3JpZXMvbW92aWUuZmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsT0FBTyxDQUNKLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FDdEIsT0FBTyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQzs7QUFFekIsU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFO0FBQ3RDLE1BQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNiLE1BQUksSUFBSSxDQUFDOzs7QUFHVCxLQUFHLENBQUMsVUFBVSxHQUFHLFlBQVc7QUFDMUIsV0FBTyxBQUFDLElBQUksR0FDWixFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUNiLEtBQUssQ0FDRixHQUFHLENBQUMsT0FBTyxnQ0FBNkIsR0FBRyxDQUFFLENBQUMsQ0FDOUMsSUFBSSxDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ2IsVUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDaEIsYUFBTyxJQUFJLENBQUM7S0FDYixDQUFDLENBQUE7R0FDTCxDQUFBOztBQUVELEtBQUcsQ0FBQyxhQUFhLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDakMsUUFBSSxNQUFNLENBQUM7QUFDWCxRQUFJLEdBQUcsR0FBRyxPQUFPLCtCQUE0QixHQUFHLGFBQVMsQ0FBQztBQUMxRCxXQUFPLEFBQUMsTUFBTSxHQUNkLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQ2IsS0FBSyxDQUNGLEdBQUcsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQ2YsT0FBTyxDQUFDLFVBQUMsR0FBRyxFQUFLO0FBQ2hCLFlBQU0sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO0FBQ3JCLGFBQU8sTUFBTSxDQUFDO0tBQ2YsQ0FBQyxDQUFBO0dBQ1AsQ0FBQTtBQUNELFNBQU8sR0FBRyxDQUFDO0NBQ1oiLCJmaWxlIjoic3JjL2pzL2ZhY3Rvcmllcy9tb3ZpZS5mYWN0b3J5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2FuZ3VsYXJNb3ZpZScpXG4gIC5mYWN0b3J5KCdNb3ZpZScsIE1vdmllKTtcblxuICBmdW5jdGlvbiBNb3ZpZSgkaHR0cCwgJHEsIEFQSV9VUkwsIEtFWSkge1xuICAgIHZhciBvYmogPSB7fTtcbiAgICB2YXIgZGF0YTtcblxuICAgIC8vIGdldHMgdHJlbmRpbmcgbW92aWVzIHdoZXRoZXIgb3Igbm90IEFQSSBjYWxsIGhhcyBiZWVuIHBlcmZvcm1lZFxuICAgIG9iai5nZXRQb3B1bGFyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKGRhdGEpID9cbiAgICAgICRxLndoZW4oZGF0YSkgOlxuICAgICAgJGh0dHBcbiAgICAgICAgLmdldChBUElfVVJMICsgYC9tb3ZpZS9wb3B1bGFyP2FwaV9rZXk9JHtLRVl9YClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGRhdGEgPSByZXMuZGF0YTtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBvYmoucGVyZm9ybVNlYXJjaCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgIHZhciBzZWFyY2g7XG4gICAgICB2YXIgdXJsID0gQVBJX1VSTCArIGAvc2VhcmNoL21vdmllP2FwaV9rZXk9JHtLRVl9JnF1ZXJ5PWA7XG4gICAgICByZXR1cm4gKHNlYXJjaCkgP1xuICAgICAgJHEud2hlbihzZWFyY2gpIDpcbiAgICAgICAgJGh0dHBcbiAgICAgICAgICAuZ2V0KHVybCArIHRleHQpXG4gICAgICAgICAgLnN1Y2Nlc3MoKHJlcykgPT4ge1xuICAgICAgICAgICAgc2VhcmNoID0gcmVzLnJlc3VsdHM7XG4gICAgICAgICAgICByZXR1cm4gc2VhcmNoO1xuICAgICAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cbiJdfQ==
